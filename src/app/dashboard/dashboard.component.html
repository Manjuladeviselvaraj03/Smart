<header class="header">
  <div class="header-container">
    <!-- Logo/Title Section -->
    <div class="logo-section">
      <h2>Dashboard</h2>
    </div>

    <!-- Search and Filter Section - Moved to Right -->
    <div class="search-filter-section">
      <div class="search-box">
        <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8"></circle>
          <path d="m21 21-4.35-4.35"></path>
        </svg>
        <input 
          type="text" 
          placeholder="Search events, meetups..." 
          [(ngModel)]="searchQuery" 
          (input)="onSearch()" 
        />
      </div>

      <div class="location-box" [class.open]="isDropdownOpen" (click)="toggleDropdown($event)">
        <svg class="location-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path>
          <circle cx="12" cy="10" r="3"></circle>
        </svg>
        <div class="custom-select">
          <div class="select-trigger">
            <span class="selected-value">{{ selectedLocation || 'All Locations' }}</span>
            <svg class="dropdown-arrow" [class.rotated]="isDropdownOpen" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </div>
          <div class="select-dropdown" *ngIf="isDropdownOpen">
            <div 
              class="select-option" 
              [class.selected]="selectedLocation === ''"
              (click)="selectLocation('')">
              <span>All Locations</span>
              <svg *ngIf="selectedLocation === ''" class="check-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="20 6 9 17 4 12"></polyline>
              </svg>
            </div>
            <div 
              *ngFor="let location of availableLocations"
              class="select-option" 
              [class.selected]="selectedLocation === location"
              (click)="selectLocation(location)">
              <span>{{ location }}</span>
              <svg *ngIf="selectedLocation === location" class="check-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="20 6 9 17 4 12"></polyline>
              </svg>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>

<div class="dashboard-content">
  <!-- Tabs -->
  <div class="tabs">
    <button 
      class="tab-button" 
      [class.active]="activeTab === 'events'"
      (click)="switchTab('events')">
      Events
    </button>
    <button 
      class="tab-button" 
      [class.active]="activeTab === 'meetups'"
      (click)="switchTab('meetups')">
      Meet ups
    </button>
    <button 
      class="tab-button" 
      [class.active]="activeTab === 'myevents'"
      (click)="switchTab('myevents')">
      My Events
    </button>
  </div>

  <!-- Events List -->
  <div class="events-container">
    <div *ngIf="filteredItems.length === 0" class="no-results">
      <p>No {{ activeTab === 'events' ? 'events' : activeTab === 'meetups' ? 'meetups' : 'registrations' }} found.</p>
    </div>
    
    <app-eventlabel 
      *ngFor="let item of filteredItems" 
      [event]="item"
      [hideRegister]="activeTab === 'myevents'"
      (registerEvent)="onRegisterEvent($event)">
    </app-eventlabel>
  </div>
</div>

<!-- Registration Confirmation Modal -->
<div class="modal-overlay" *ngIf="showConfirmModal" (click)="closeConfirmModal()">
  <div class="modal-content confirm-modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>Confirm Registration</h2>
      <button class="close-btn" (click)="closeConfirmModal()">&times;</button>
    </div>
    
    <div class="modal-body">
      <p><strong>Event:</strong> {{ selectedEventForRegistration?.title }}</p>
      <p><strong>Timing:</strong> {{ selectedEventForRegistration?.timing }}</p>
      <p><strong>Date:</strong> {{ selectedEventForRegistration?.startingDate }}</p>
      <p>Do you want to register for this event?</p>
    </div>
    
    <div class="modal-footer">
      <button class="btn-confirm" (click)="confirmRegistration()">OK</button>
      <button class="btn-cancel" (click)="closeConfirmModal()">Cancel</button>
    </div>
  </div>
</div>
